<div class="container">
  <div class="actions">
    <button id="toggleSold" data-showing="false" class="button secondary">
      Show Sold Items
    </button>
  </div>

  <table class="inventory-table">
    <thead>
      <tr>
        <th>Image</th>
        <th>QR Code</th>
        <th>Name</th>
        <th>Price</th>
        <th>Sold</th>
        <th>Sold Where</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% if @items.empty? %>
        <tr>
          <td colspan="7" class="text-center text-muted">No items yet.</td>
        </tr>
      <% else %>
        <% @items.each do |item| %>
          <% sold = item[:sold].to_s == 'true' %>
          <tr
            data-sold="<%= sold %>"
            style="<%= sold ? 'display:none;' : '' %>"
            class="<%= sold ? 'sold-row' : '' %>"
          >
            <!-- Image -->
            <td>
              <% if item[:image] && !item[:image].empty? %>
                <img src="/<%= item[:image] %>" alt="<%= item[:name] %>" class="thumb">
              <% else %>
                <div class="placeholder">ðŸŽ¨</div>
              <% end %>
            </td>

            <!-- QR Code -->
            <td>
              <% if item[:qr_code] && !item[:qr_code].empty? %>
                <img src="/<%= item[:qr_code] %>" alt="QR for <%= item[:name] %>" class="qr-thumb">
              <% else %>
                â€”
              <% end %>
            </td>

            <!-- Name -->
            <td><%= h(item[:name]) %></td>

            <!-- Price -->
            <td>$<%= sprintf('%.2f', item[:price].to_f) %></td>

            <!-- Sold Status -->
            <td class="<%= sold ? 'status-sold' : 'status-available' %>">
              <%= format_sold(item) %>
            </td>

            <!-- Sold Where -->
            <td><%= item[:sold_where].to_s.strip.empty? ? 'â€”' : h(item[:sold_where]) %></td>

            <!-- Actions -->
            <td class="actions-cell">
              <a href="/items/<%= item[:id] %>" class="button small">View</a>
              <a href="/items/<%= item[:id] %>/edit" class="button small secondary">Edit</a>
            </td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
